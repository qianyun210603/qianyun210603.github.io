---
title: 【C++知识库】关于stdafx.h
date: 2024-07-01T15:36:36+08:00
toc: true
tags: 
categories: 
- Programming
- C++
---

&emsp;&emsp;`stdafx.h`是Visual Studio项目中用于加速构建过程的预编译头文件。`stdafx.h`的名称是传统上的，来源于Visual Studio的早期版本，但它本身没有任何内在的含义。使用预编译头文件可以显著减少大型项目的编译时间。

### 预编译头文件的工作原理
&emsp;&emsp;当你编译一个 C++ 程序时，编译器会处理每个编译单元（通常是一个 .cpp 文件）中包含的头文件。这个过程可能非常耗时，特别是对于有许多头文件在多个编译单元中被包含的大型项目。为了优化这一点，引入了预编译头文件的概念。

&emsp;&emsp;预编译头文件被编译一次，然后在多个编译单元中重用。这意味着，只要这些头文件没有改变，编译器就可以跳过在每个编译单元中处理预编译头文件中包含的头文件，从而加速编译过程。
### `stdafx.h`和`stdafx.cpp`
- `stdafx.h`：这个文件通常包含 C++ 标准库的头文件、外部库的头文件以及其他项目特定的、不经常改变的头文件。通过在 stdafx.h 中包含这些头文件，你确保它们只被编译一次，然后被重用，从而加速后续的编译。
- stdafx.cpp：这个文件用于创建预编译头文件。它通常只包含一行代码：#include "stdafx.h"。当这个文件被编译时，它会生成预编译头文件（`.pch`）。

### 为什么 Visual Studio 会自动提供 stdafx.h
&emsp;&emsp;Visual Studio在启用预编译头文件的项目中自动提供`stdafx.h`，是为了鼓励使用这个功能来加快构建时间。对于较大的项目或有许多外部库的项目，使用预编译头文件特别有益。

## 参考资料
> - Github Copilot
